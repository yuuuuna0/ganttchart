<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.weaverloft.ganttchart.mapper.MenuMapper">
<!--1. 메뉴 전체 찾기-->
    <select id="findMenuList" resultType="com.weaverloft.ganttchart.dto.Menu">
        select * from menu
    </select>
    <select id="findAdminMenuList" resultType="com.weaverloft.ganttchart.dto.Menu">
        select * from menu where u_type_no = 0
    </select>
    <select id="findUserMenuList" resultType="com.weaverloft.ganttchart.dto.Menu">
        select * from menu where u_type_no = 1
    </select>
    <select id="findSellerMenuList" resultType="com.weaverloft.ganttchart.dto.Menu">
        select * from menu where u_type_no = 2
    </select>
<!--2. 메뉴 등록하기    -->
    <insert id="createMenu1" parameterType="com.weaverloft.ganttchart.dto.Menu">
        <selectKey keyProperty="menuNo" resultType="java.lang.Integer" order="BEFORE">
            select menu_menu_no_seq.nextval from dual
        </selectKey>
        insert into Menu(MENU_NO, PARENT_ID, ORDERS, MENU_TITLE, MENU_URL, MENU_DESC, U_TYPE_NO)
        values (#{menuNo},#{menuNo},1,#{menuTitle},#{menuUrl},#{menuDesc},#{uTypeNo})
    </insert>
    <insert id="createMenu2" parameterType="com.weaverloft.ganttchart.dto.Menu">
        <selectKey keyProperty="menuNo" resultType="java.lang.Integer" order="BEFORE">
            select menu_menu_no_seq.nextval from dual
        </selectKey>
        insert into Menu(MENU_NO, PARENT_ID, ORDERS, MENU_TITLE, MENU_URL, MENU_DESC, U_TYPE_NO)
        values (#{menuNo},#{parentId},2,#{menuTitle},#{menuUrl},#{menuDesc},#{uTypeNo})
    </insert>
</mapper>
